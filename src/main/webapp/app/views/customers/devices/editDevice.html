<div class="blue-bg-bar min-height-52 relative"></div>
<div class="bar line-height-40 relative x-md-padding">
    <span class="size-14 weight-500 line-height-40">Edit Device Information</span>
</div>
<s-gray-gap></s-gray-gap>
<div class="clear"></div>
<form role="form" class="form-horizontal scroll top-98 col-xs-12" name="addDeviceForm" novalidate="" ng-submit="addDevice(addDeviceForm)" autocomplete="off">
    <gap></gap>
    <div disable-all="disableArea">
		<div class="col-lg-7 col-md-10">
        <div class="form-group required">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Device Name</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" name="name" ng-model="device.name" maxlength="50" maxlength50="device.name" required skip-disable>
                <div ng-show="addDeviceForm.name.$error && addDeviceForm.$submitted" ng-messages="addDeviceForm.name.$error">
                    <div ng-messages-include="error-list1.html"></div>
                </div>
            </div>
            </div>
            <div class="clear"></div>
        </div>
        </div>
        <div class="clear"></div>
		<div class="col-lg-7 col-md-10">
        <div class="form-group required">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Device Type</label>
            <div class="col-sm-8">
                <select class="form-control" required ng-model="device.deviceType" name="deviceType" select-validation="device.deviceType" ng-init="device.deviceType='2'" skip-disable disabled>
                    <option value="2" selected>Thermostat</option>
                </select>
                <div ng-show="addDeviceForm.deviceType.$error && addDeviceForm.$submitted" ng-messages="addDeviceForm.deviceType.$error">
                    <div ng-messages-include="error-list1.html"></div>
                </div>
            </div>
            </div>
            <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
		<div class="col-lg-7 col-md-10">
        <div class="form-group ">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Device Tag</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" name="deviceTag" ng-model="device.deviceTag" skip-disable maxlength="30">
                <div ng-show="addDeviceForm.deviceTag.$error && addDeviceForm.$submitted" ng-messages="addDeviceForm.deviceTag.$error">
                    <div ng-messages-include="error-list1.html"></div>
                </div>
            </div>
            </div>
            <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
		<div class="col-lg-7 col-md-10">
        <div class="form-group required">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Make/Model</label>
            <div class="col-sm-8">
                <select class="form-control" required ng-model="device.model" name="model" select-validation="model" skip-disable disabled>
                    <option value="">Select model</option>
                    <option value="Pro1 T855i">Pro1 T855i</option>                                                  
                <option value="Pro1 T855i2">Pro1 T855i2</option>
                    <option value="Jackson T-32-P">Jackson T-32-P</option>
                </select>
                <div ng-show="addDeviceForm.model.$error && addDeviceForm.$submitted" ng-messages="addDeviceForm.model.$error">
                    <div ng-messages-include="error-list1.html"></div>
                </div>
            </div>
            </div>
            <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
		<div class="col-lg-7 col-md-10">
        <div class="form-group required">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Mac ID</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" name="macId" ng-model="device.macId" ng-change="device.macId = device.macId.toUpperCase()" ui-mask="**-**-**-**-**-**"  ui-mask-placeholder ui-mask-placeholder-char="_" ui-options="{clearOnBlur:false,allowInvalidValue:true }" model-view-value="true" maxlength="32" maxlength32="device.macId" required>
                <div ng-show="addDeviceForm.macId.$error && addDeviceForm.$submitted" ng-messages="addDeviceForm.macId.$error">
                    <div ng-messages-include="error-list1.html"></div>
                </div>
                <div class="error" ng-show="preventSpaces && addDeviceForm.$submitted">This field should not contain spaces</div>
            </div>
            </div>
            <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
		<div class="col-lg-7 col-md-10">
        <div class="form-group">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Version</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" name="version" ng-model="device.version" maxlength="32" maxlength32="device.version">                
            </div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
        <div class="form-group col-xs-12 col-lg-6" ng-if="device.model=='Jackson T-32-P'">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">SF22 HW Version</label>
            <div class="col-xs-9">
                <input type="text" class="form-control" name="sf22HwVersion" ng-model="device.sf22HwVersion">
                <div ng-show="addDeviceForm.sf22HwVersion.$error && addDeviceForm.$submitted" ng-messages="addDeviceForm.sf22HwVersion.$error">
                    <div ng-messages-include="error-list1.html"></div>
                </div>
            </div>
            </div>
            <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
		<div class="col-lg-7 col-md-10">
        <div class="form-group">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Wi-Fi Key</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" name="wifiKey" ng-model="device.wifiKey" skip-disable maxlength="20">          
            </div>
            <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
		</div>

		<div class="col-lg-7 col-md-10">
        <div class="form-group required">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Site</label>
            <div class="col-sm-8">
                <select class="form-control" ng-model="device.siteId" name="siteId" required ng-change="changeSite()" ng-options="item.siteId as item.siteName for item in sites">
                    <option value="" selected>Select site</option>                   
                </select>
            </div>
            </div>
            <div class="clear"></div>
        </div>
        </div>
        <div class="clear"></div>
        <gap></gap>
        <gap></gap>
        <div class="clear"></div>
		<div class="col-lg-7 col-md-10">
        <div class="form-group">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Site Survey Thermostat Unit #</label>
            <div class="col-sm-8">
                <select class="form-control" ng-model="device.unit" name="unit" ng-change="getUnit()" skip-disable>
                    <option value="" selected>Select Unit</option>
                    <option ng-repeat="unit in units" value="{{unit.tstatUnit}}" ng-selected="device.unit == unit.tstatUnit">{{unit.tstatUnit}}</option>

                </select>
            </div>
            </div>
            <div class="clear"></div>
        </div>
        </div>

        <div class="clear"></div>
        <div class="col-lg-7 col-md-10">
        <div class="form-group">
        	<div class="row">
            <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Location</label>
            <div class="col-sm-8">
                <select class="form-control" name="location" ng-model="device.location" skip-disable ng-options="item.value as item.label for item in locations">
                    <option value="" selected>Select Location</option>
                </select>
            </div>
            </div>
            <div class="clear"></div>
        </div>
            
            <div class="form-group required" ng-if="device.location == 23">
    	<div class="row">
        <label for="email" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Please specify other location</label>
        <div class="col-sm-8">

            <input class="form-control" name="location" skip-disable required ng-model="device.otherLocation"/>
            <div ng-show="addDeviceForm.location.$error && addDeviceForm.$submitted" ng-messages="addDeviceForm.location.$error">
                    <div ng-messages-include="error-list1.html"></div>
                </div>
        </div>
        </div>
        <div class="clear"></div>
    </div>
            
        </div>
        <div class="clear"></div>
		<div class="col-lg-7 col-md-10">
        <div class="form-group ">
        	<div class="row">
            <label for="status" class="weight-400 control-label size-14 col-sm-4 text-left-imp">Status</label>
            <div class="col-sm-8">

                <select class="form-control" ng-model="device.isActive" ng-options="option.id as option.label for option in statusOptions" skip-disable>
                </select>

            </div>
            </div>
            <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
		<div class="row">
        <div class="form-group no-margin">
            <h1 class="size-16 weight-700 line-height-40 x-md-padding no-margin pull-left">Thermostat Preferences</h1> </div>
        <hr class="no-margin" />
        <gap></gap>
        <div class="clear"></div>
        <div class="col-lg-7 col-md-10">
        <div class="form-group">
        	<div class="">
            <div class="col-xs-6 col-sm-6 " ng-init="device.fanPref='2'">
                <div class="radio">
                    <label>
                        <input type="radio" name="fanPref" ng-model="device.fanPref" ng-value="1" skip-disable> Fan On </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" name="fanPref" ng-model="device.fanPref" ng-value="0" checked skip-disable> Fan Auto </label>
                </div>
            </div>
            <div class="col-xs-6 col-sm-6 ">
                <div class="radio">
                    <label class="no-padding">
                        <input type="checkbox" name="hvacToAuto" ng-true-value="1" ng-false-value="0" ng-model="device.hvacToAuto" skip-disable> Reset HVAC to Auto </label>
                </div>
                <div class="radio">
                    <label class="no-padding">
                        <input type="checkbox" name="holdToAuto" ng-true-value="1" ng-false-value="0" ng-model="device.holdToAuto" skip-disable> Reset Hold to Off </label>
                </div>
            </div>
            <div class="col-xs-6 col-sm-6" ng-init="device.lockPref='0'">
            	<div class="radio">
                    <label>
                        <input type="radio" name="lockPref" ng-model="device.lockPref" ng-value="0" skip-disable> Unlock </label>
                </div>
                <div class="radio">
                    <label>
                        <input type="radio" name="lockPref" ng-model="device.lockPref" ng-value="1" skip-disable> Partial </label>
                </div>
                 <div class="radio">
                <label class="">
                    <input type="radio" name="lockPref" ng-model="device.lockPref" ng-value="2" skip-disable> Full </label>
            </div>
            </div>

            <div class="clear"></div>
            <gap></gap>


            <div class="col-xs-6 col-sm-6 ">
                <div class="form-group required col-xs-12">
                    <label for="email" class="weight-400 size-14 control-label">Min SP</label>

                    <input type="number" class="form-control" empty-zero name="minSP" ng-model="device.minSP" min="45" max="90" skip-disable required/>

                    <div ng-show="addDeviceForm.minSP.$error.required && addDeviceForm.$submitted" ng-messages="addDeviceForm.minSP.$error">
                        <div ng-messages-include="error-list1.html"></div>
                    </div>

                    <div ng-show="addDeviceForm.minSP.$error.number && addDeviceForm.$submitted && !addDeviceForm.minSP.$error.required">
                        <div class="error size-15">
                            Please enter valid number
                        </div>
                    </div>
                    <p class="error" ng-if="!addDeviceForm.minSP.$error.required && addDeviceForm.$submitted" ng-show="addDeviceForm.minSP.$error.min || addDeviceForm.minSP.$error.max">Please enter value between 45 to 90</p>
                </div>
            </div>
            <div class="col-xs-6 col-sm-6">
                <div class="form-group required col-xs-12">
                    <label for="" class="weight-400 size-14 control-label">Max SP</label>
                    <input type="number" class="form-control" empty-zero name="maxSP" ng-model="device.maxSP" min="{{device.minSP*1+1}}" max="90" skip-disable required/>

                    <div ng-show="addDeviceForm.maxSP.$error.required && addDeviceForm.$submitted" ng-messages="addDeviceForm.maxSP.$error">
                        <div ng-messages-include="error-list1.html"></div>
                    </div>
                    <div ng-show="addDeviceForm.maxSP.$error.number && addDeviceForm.$submitted && !addDeviceForm.maxSP.$error.required">
                        <div class="error size-15">
                            Please enter valid number
                        </div>
                    </div>
                  	<p class="error" ng-if="!addDeviceForm.maxSP.$error.required && addDeviceForm.maxSP.$error.max && addDeviceForm.$submitted">Please enter value between {{(device.minSP) ? (device.minSP*1+1) : 45 }} to 90</p>                               
					<p class="error" ng-if="!addDeviceForm.maxSP.$error.required && addDeviceForm.maxSP.$error.min && addDeviceForm.$submitted">Max SP has to be greater than Min SP</p>  
                </div>
            </div>
			</div>
        </div>
        </div>
        <div class="clear"></div>
        <div class="col-lg-6 col-xs-12">
            <div class="checkbox">
                <label>
                    <input type="checkbox" ng-model="device.nightSchedule" name="nightSchedule" ng-true-value="1" ng-false-value="0" skip-disable> Nightly Schedule Download </label>
            </div>
        </div>

        <div class="clear"></div>
    </div>
    <div class="clear"></div>
    <hr/>
    <div class="form-group">

        <div class="" ng-init="device.registerType='0'">

            <label class="checkbox-inline padding x-lg-padding">
                <input type="checkbox" name="registerType" ng-true-value="1" ng-false-value="0" ng-model="device.registerType" ng-change="disconnectDevice()" skip-disable>Connect to device</label>
        </div>
        <div class="clear"></div>
    </div>
    </div>
    <div class="clear"></div>
    <hr class="no-margin" />
    <gap></gap>
    <div class="" ng-if="userDetails.rolePermissions['Device Management']==2">
        <a href="javascript:void(0)" onclick="history.back()" class="btn btn-default pull-right margin-left10 mob-bottom-10">Cancel</a>
        <button type="submit" class="btn btn-primary pull-right margin-left10 mob-bottom-10">Save</button>
        <button type="button" class="btn btn-default pull-right margin-left10 mob-bottom-10" ng-click="removeDevice()">Delete</button>
    </div>
    <div class="clear"></div>
    <gap></gap>
</form>
<script id="error-list1.html" type="text/ng-template">
    <div class="error size15" ng-message="required">This field is required</div>
    <div class="error size15" ng-message="compareTo">Repeat password doesn't match the new password </div>
    <div class="error size15" ng-message="noSpaces">This field should not contain spaces</div>
    <div class="error size15" ng-message="pattern">Password should contain at least 8 alphanumeric characters</div>
    <div class="error" ng-message="maxlength20">Maximum length of this field is 20 characters</div>
    <div class="error" ng-message="maxlength50">Maximum length of this field is 50 characters</div>
    <div class="error" ng-message="maxlength32">Maximum length of this field is 32 characters</div>
    <div class="error size15" ng-message="comparePrevious">Repeat password doesn't match the new password</div>
<div class="error size15" ng-message="mask">Please enter valid mac id</div>
</script>